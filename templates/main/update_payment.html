{% extends 'base.html' %}
{% block content %}

<div class="container">
  <h1>Update Payment</h1>
  <form class="responsive-form" method="POST" action="{% url 'payment_update' payment.id %}">
    {% csrf_token %}

    <div class="form-group">
      <label for="booking">Booking Name</label>
      <select id="booking" name="booking" required>
        {% for booking in bookings %}
        <option value="{{ booking.id }}" {% if booking.id == payment.booking.id %}selected{% endif %}>
          Booking: {{ booking.id }} - {{ booking.first_name }} {{ booking.last_name }}
        </option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group">
      <label for="payment_date">Payment Date:</label>
      <input
        type="datetime-local"
        id="payment_date"
        name="payment_date"
        value="{{ payment.payment_date|date:'Y-m-d\TH:i' }}"
        required
      />
    </div>

    <div class="form-group">
      <label for="amount_paid">Amount Paid:</label>
      <input
        type="number"
        id="amount_paid"
        name="amount_paid"
        value="{{ payment.amount_paid }}"
        step="0.01"
        required
      />
    </div>

    <div class="form-group">
      <label for="payment_method">Payment Method:</label>
      <select id="payment_method" name="payment_method" required>
        <option value="CREDIT_CARD" {% if payment.payment_method == 'CREDIT_CARD' %}selected{% endif %}>Credit Card</option>
        <option value="CASH" {% if payment.payment_method == 'CASH' %}selected{% endif %}>Cash</option>
        <option value="ONLINE" {% if payment.payment_method == 'ONLINE' %}selected{% endif %}>Online</option>
      </select>
    </div>

    <div class="form-group">
      <label for="status">Status:</label>
      <select id="status" name="status" required>
        <option value="PAID" {% if payment.status == 'PAID' %}selected{% endif %}>Paid</option>
        <option value="PENDING" {% if payment.status == 'PENDING' %}selected{% endif %}>Pending</option>
        <option value="FAILED" {% if payment.status == 'FAILED' %}selected{% endif %}>Failed</option>
      </select>
    </div>

    <button type="submit">Update</button>
    <br /><br />
    <td>
      <a href="{% url 'payment_list' %}" class="btn primary-btn">Go Back</a>
      <br /><br />
    </td>
  </form>
</div>

{% endblock content %}
